---
layout: post
title: DNS相关知识
category: misc
---

##### dns解析过程

以访问www.apple.com为例说明，按照下面的顺序查找DNS对应的IP:

1. 客户端查询本地DNS文件
2. 客户端查询本地DNS缓存信息
3. 客户端查询本地DNS服务器，本地DNS服务器首先在该服务器管理的区域的记录中查找，如果找到该记录，则利用此记录进行解析；如果没有区域信息可以满足查询要求，服务器在本地的缓存中查找
4. 本地DNS服务器查询根DNS，若无，则将其管辖范围内.com服务器的IP地址告诉本地DNS服务器
5. 本地DNS服务器查询.com服务器
6. 本地DNS服务器查询.apple服务器
7. 本地DNS服务器将www.apple.com的IP地址返回给客户端
8. 客户端通过这个IP地址与WEB站点建立连接

##### 本地DNS文件

windows下为”C:\Windows\System32\drivers\etc\hosts”，linux/mac下为文件”/etc/resolv.conf”

##### A记录

A (Address) 记录是用来指定主机名（或域名）对应的IP地址记录。用户可以将该域名下的网站服务器指向到自己的网页服务器(web server)上。同时也可以设置域名的子域名。
通俗来说A记录就是服务器的IP，域名绑定A记录就是告诉DNS，当输入域名的时候给你引导向设置在DNS的A记录所对应的服务器

##### CNAME

别名记录(CNAME)也被称为规范名字。这种记录允许您将多个名字映射到同一台计算机。 通常用于同时提供WWW和MAIL服务的计算机。例如，有一台计算机名为“host”（A记录）。它同时提供WWW和MAIL服务，为了便于用户访问服务。可以为该计算机设置两个别名（CNAME）：WWW和MAIL。 这两个别名的全称就是www开头的域名和以mail开头的域名。实际上他们都指向“host”。

##### 你的DNS服务器

个人无需配置DNS服务器，各地电信，联通，移动等运营商都有自己的DNS服务器，用户在家里上网时一般都是DHCP，这样会自动分配对应各地运营商的DNS服务器。使用本地运营商的DNS服务器可能有几个坏处:

1. 运营商推送广告
2. 本地运营商安全意识不够，比较容易发生DNS劫持
3. 政府可能会通过DNS服务器限制用户对某些网站的访问

好处就是速度比较快.

##### 公共DNS服务器

有些大型企业会提供公开的DNS服务器，譬如google（8.8.8.8），OpenDNS（208.67.222.222）等，用户在家里上网时，可以手动配置这些公开的DNS服务器，可以适当避免本地运营商DNS服务器的缺点，但坏处是速度可能会慢。

